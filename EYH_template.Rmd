---
title: "Introduction to Data Science (EYH)"
author:
    - "@@@"
    - "@@@"
date: "March 4, 2017"
output: html_document
---

# Basic Computations in R

We start by demonstrating how to do some basic computations in R.

## Example 1 (basic arithmetic)

You may notice that the "code chunk" below looks a little different - it has a gray background and begins and ends with 3 copies of the ` symbol. These symbols help to differentiate computer code from normal text.

We can type code in this part of the file and have the computer execute it. Begin by typing "1 + 2" into the code chunk. Then click on the green triangle to run the code and see the output.

```{r}

```

## Example 2 (variable assignment)

If we were baking a pie, we would usually prepare the crust and filling separately and then combine them together. We can do the same for a complex set of instructions for the computer, by saving the results and combining them later.

We can use the "<-" symbol to assign our results to **variables** that we can use later. The first line of the following code chunk saves the output of "10 * 10" into a variable named "a". Later, when we want to use the result, we only need to type "a" instead of the whole calculation

Try saving the output of "3 ^ 5" into a variable named "b". 

```{r}
a <- 10 * 10
@@@
```

After you run the code, do you notice the variables "a" and "b" appearing in your environment? Try typing "a" and "b" in the console.

Now we can use the variables "a" and "b" for further calculations:

```{r}
a - b

a * a + b

sqrt((a + b) / 7)
```

# Loading and Viewing Data

## Read in raw csv data (Carbon Dioxide Measurements)

We can load in large amounts of data in R by reading in some files directly.

First, we can look at our file, which contains monthly measures of Carbon Dioxide (CO2) from Mauna Loa, Hawaii, and global temperature anomalies computed by the NASA Goddard Institute for Space Science.

```{r}
co2_temperature <- read.csv("co2_temperature.csv")
```

This creates a new object containing the data read in from the file.

We can look at the entire dataset by simply evaluating the object as its own line of code:

```{r}
co2_temperature
```

Or portions of the dataset, such as the first 5 rows (but all 8 columns):

```{r}
co2_temperature[1:5, ]
```

Or the first 4 columns (but all 707 rows):

```{r}
co2_temperature[, 1:4]
```

Or only the first 5 rows and first 4 columns:

```{r}
co2_temperature[1:5, 1:4]
```

There are also convenient functions for viewing datasets:

```{r}
summary(co2_temperature)
```

## Load data from package (Gapminder)

Some datasets are also part of packages, which are extensions of R that can be installed and then loaded.

Here, we load the `gapminder` package, which contains information about life expectancy, population size, and gross domestric product (GDP) for 136 countries from 1952 to 2007:

```{r}
library(gapminder)
```

Try viewing this dataset:

```{r}
summary(@@@)
```

# Make Plots

We can explore patterns in the data by producing graphs, that allow visualization of information that may otherwise by too big or complex to see otherwise.

To do this, we are going to load the `ggplot2` package.

```{r}
library(ggplot2)
```

## Basic scatterplot (Gapminder)

First, we want to see if there is a relationships between GDP and life expectancy - whether people in richer countries live longer. Since the `gapminder` data contains measurements from multiple years, let's first restrict it to data from 2007. 

```{r}
gapminder_2007 <- gapminder[gapminder$year == ????,] 
```

Now make a plot. Notice where we set the variables to be plotted on the x-axis and the y-axis, as well as the type of plot.

```{r}
ggplot(gapminder_2007, 
       aes(x = gdpPercap, y = lifeExp)) + 
    geom_point() + 
    theme_bw()
```

Try changing one of the axes variables to be "pop" (population). Is there still a clear pattern?
.
```{r}
ggplot(gapminder_2007, 
       aes(x = @@@, y = @@@)) + 
    geom_point() + 
    theme_bw()
```

## Basic lineplot (Carbon Dioxide)

In cases where the x-axis is time, we might want to use a line plot instead. Let's try this with the `co2_temperature` dataset.

```{r}
ggplot(@@@, 
       aes(x = decimal_date, y = @@@)) + 
    geom_line() + 
    theme_bw()
```

## Basic barplot (Thanksgiving pies)

The `thanksgiving-2015-pie-data.csv` file contains survey results about the kinds of pie that people have at Thanksgiving.

Try reading this into a new variable.

```{r}
@@@ <- read.csv("thanksgiving-2015-pie-data.csv")
```

Is there a way to see the contents of the dataset?

```{r}
@@@
```

To create a barplot, we're going to use a new geom, and this time allow the color to change according to the column name corresponding to the kind of pie:

```{r}
ggplot(@@@, 
       aes(x = "", fill = @@@)) + 
    geom_bar() + 
    theme_bw()
```

If we wanted to make this into a "pie" chart, we simply need to add an additional line to change the coordinate system.

```{r}
ggplot(@@@, 
       aes(x = "", fill = @@@)) + 
    geom_bar() + 
    theme_bw() + 
    coord_polar("y")
```

## Stacked barplot (Star Wars character ratings)

The `SW_character_ratings.RDS` file contains survey results about different Star Wars characters. Answers are on a 5-point scale from "Very unfavorably" to "Very favorably", with some empty answers.

Here, we are going to use the `readRDS` function to load the data.

```{r}
@@@ <- readRDS("@@@")
summary(@@@)
```

For this plot, we want the characters to be different bars along the x-axis, with color based on the rating.

```{r}
ggplot(@@@, 
       aes(x = @@@, fill = @@@)) + 
    geom_bar() + 
    theme_bw() + 
    theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0))
```

Which character has the most "very unfavorable" ratings?
What about "very unfavorable" and "somewhat unfavorable"?
What about favorable ratings?

## Challenge Tasks

* Define the colors for the pie chart:
```{r}
ggplot(thanksgiving_pies, 
       aes(x = "", fill = pie_type)) + 
    geom_bar() + 
    scale_fill_manual(values = c("Apple" = "@@@", 
                                 "Buttermilk" = "@@@", 
                                 "Cherry" = "@@@", 
                                 "Chocolate" = "@@@", 
                                 "Coconute cream" = "@@@", 
                                 "Key lime" = "@@@", 
                                 "None" = "@@@", 
                                 "Peach" = "@@@", 
                                 "Pecan" = "@@@", 
                                 "Pumpkin" = "@@@", 
                                 "Sweet Potato" = "@@@")) + 
    theme_bw() + 
    coord_polar("y")
```

# Generate Report

The specific kind of file we used is known as R markdown, which allows us to create reports easily. You can try this know by clicking on the "Knit" button above.
